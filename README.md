# e-scatter

Fast CUDA-enabled simulator for electron scattering processes in materials.

[![Build Status](https://travis-ci.org/eScatter/e-scatter.svg?branch=master)](https://travis-ci.org/eScatter/e-scatter)

## Building

Dependencies of the core simulator:
* C++14 compiler (tested with GCC 5)
* CUDA 8.0 or newer
* CUB
* CMake 3.8 or newer
* Boost
* HDF5 1.10.1 or newer

The core simulator also depends on the [csread project](https://github.com/eScatter/csread),
which is loaded as a git submodule. If the `3rdparty/csread` folder is empty, pull the latest
version:
````git submodule init
git submodule update
````

Then build the program:

````sh
cd e-scatter
mkdir build
cd build
cmake ..
make
````

To also build all of the utilities, append `-DWITH_UTILS=ON` to the `cmake` command.
Dependencies required to build the utilities:
* ImageMagick
* FFTW
* SDL2
* OpenGL
* GLEW

## Usage

The main program is located at `bin/csdem`. It requires a geometry file, which
can be generated with `bin/line-gen`, and an exposure file, which can be
generated with `scripts/pri-gen.py`.

## Testing

To run the unit tests, the googletest library should be available in the 
3rdparty directory; clone it from github and run `cmake` with `-DWITH_TEST=ON`.

````sh
cd 3rdparty
git clone https://github.com/google/googletest.git
mkdir -p ../build
cd ../build
cmake .. -DWITH_TEST=ON
make
make test
````

## Creating materials

The material files contain most of the physics involved. They can be generated by the
[cstool project](https://github.com/eScatter/cstool).
